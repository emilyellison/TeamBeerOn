$(document).ready( function() {

	// Autocomplete the location when someone types in a bar.

	// $(function() {
	// 	var bars = <%= Bar.all.map(&:name).to_json.html_safe %>;
	// 	$( "#keyword" ).autocomplete({
	// 		source: bars,
	// 		delay: 0
	// 	});
	// });
	
	// Submit the preference form when someone selects a style. 
	
	$('#q_style_cont').live('change',function() {
      $(this).closest('form').submit();
  });
		
	// Submit the preference form when someone checks a checkbox.
	
	$('.button').live('click',function(e) {
		  var z = $(this).next().next();
			var v = z.attr('checked');
			z.attr('checked', !v);
			$(this).closest('form').submit();
			e.preventDefault();
	});
	
	// Submit the preference form when someone unchecks a checkbox.
	
	$('.checked').live('click',function(e) {
		  var z = $(this).next().next();
			var v = z.attr('checked');
			z.removeAttr('checked', v);
			$(this).closest('form').submit();
			e.preventDefault();
	});
		
	// Submit the form when someone orders on rarity.
	
	$('#rarity_true').live('change',function(e) {
			$(this).closest('form').submit();
			$("#rarity_true").toggleClass("rarity_false")
	});
	
	$('#rarity_false').live('change',function(e) {	
			$(this).closest('form').submit();
			$("#rarity_false").toggleClass("rarity_true")
	});
	
	// Submit the form when someone chooses draft.
	
	$('#draft_true').live('change',function(e) {
			$(this).closest('form').submit();
			$("#draft_true").toggleClass("draft_false")
	});
	
	$('#draft_false').live('change',function(e) {	
			$(this).closest('form').submit();
			$("#draft_false").toggleClass("draft_true")
	});
	
	// Display rarity popovers.
	
	$('#rarity_true').popover();
	$('#rarity_false').popover();
	
	// Display draft popovers.
	
	$('#draft_true').popover();
	$('#draft_false').popover();
		
});